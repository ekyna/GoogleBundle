<?xml version="1.0" encoding="UTF-8" ?>
<container
    xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services
                        http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <!-- Google client -->
        <service id="ekyna_google.client" class="Ekyna\Bundle\GoogleBundle\GoogleClient">
            <argument>%ekyna_google.client_config%</argument>
        </service>

        <!-- Form types -->
        <service id="ekyna_google.coordinate.form_type" class="Ekyna\Bundle\GoogleBundle\Form\Type\CoordinateType">
            <tag name="form.type" />
            <tag name="form.js" selector=".ekyna-google-coordinate" path="ekyna-form/google-coordinate" />
        </service>

        <!-- Show types -->
        <service id="ekyna_google.show.google_map_type"
                 class="Ekyna\Bundle\GoogleBundle\Show\Type\GoogleMapType">
            <tag name="ekyna_admin.show.type" alias="google_map"/>
        </service>

        <!-- Settings Schema -->
        <service id="ekyna_google.settings" class="Ekyna\Bundle\GoogleBundle\Settings\Schema">
            <tag name="ekyna_setting.schema" namespace="google" position="90" />
        </service>

        <!-- Map pool -->
        <service id="ekyna_google.map_pool" class="Ekyna\Bundle\GoogleBundle\Twig\MapPool"/>

        <!-- Twig Extensions -->
        <service id="ekyna_google.twig.google_extension" class="Ekyna\Bundle\GoogleBundle\Twig\GoogleExtension">
            <argument type="service" id="ekyna_setting.manager" />
            <argument>%kernel.debug%</argument>
            <tag name="twig.extension" />
        </service>

    </services>

</container>
